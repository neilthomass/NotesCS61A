<!DOCTYPE html>
<html lang="en" dir="ltr">
<head><script src="/cs61a/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=cs61a/livereload" data-no-instant defer></script>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="
  Recursive Data
  #


  Linked Lists
  #

Python lists are implemented in a way that makes inserting and deleting from the front of a list very inefficient. This is because Python implemented a list such that the first element of the list is always at the same memory location and elements in a list are located right next to each other, so when something is inserted to the start, everything gets pushed forward by one space in memory to make space for an element.">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:url" content="https://neilthomass.github.io:1313/cs61a/docs/week-8/recursive-data/">
  <meta property="og:site_name" content="CS61A NT">
  <meta property="og:title" content="Recursive Data">
  <meta property="og:description" content="Recursive Data # Linked Lists # Python lists are implemented in a way that makes inserting and deleting from the front of a list very inefficient. This is because Python implemented a list such that the first element of the list is always at the same memory location and elements in a list are located right next to each other, so when something is inserted to the start, everything gets pushed forward by one space in memory to make space for an element.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="docs">
    <meta property="article:modified_time" content="2025-04-30T17:44:57-07:00">
<title>Recursive Data | CS61A NT</title>
<link rel="icon" href="/cs61a/favicon.png" >
<link rel="manifest" href="/cs61a/manifest.json">
<link rel="canonical" href="https://neilthomass.github.io:1313/cs61a/docs/week-8/recursive-data/">
<link rel="stylesheet" href="/cs61a/book.min.a7616cf2799b58bddffce9438e31fdbfc6393687cfc0950a4a17cd1cce7e35f6.css" integrity="sha256-p2Fs8nmbWL3f/OlDjjH9v8Y5NofPwJUKShfNHM5&#43;NfY=" crossorigin="anonymous">
  <script defer src="/cs61a/fuse.min.js"></script>
  <script defer src="/cs61a/en.search.min.820683db81da223492db71e6068c669e834fb9c9924e1c409a37c6678184cbe1.js" integrity="sha256-ggaD24HaIjSS23HmBoxmnoNPucmSThxAmjfGZ4GEy&#43;E=" crossorigin="anonymous"></script>

  <script defer src="/cs61a/sw.min.c5426bb5f67ff745bd2ede683f7c618cbc0ab00dc6f62c6d83d8a711babe222a.js" integrity="sha256-xUJrtfZ/90W9Lt5oP3xhjLwKsA3G9ixtg9inEbq&#43;Iio=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/cs61a/"><span>CS61A NT</span>
  </a>
</h2>


<div class="book-search hidden">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>
<script>document.querySelector(".book-search").classList.remove("hidden")</script>







  
<ul>
  
  <li>
    <a href=""  target="_blank" rel="noopener">
        
      </a>
  </li>
  
</ul>










  
  <ul>
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Week 1</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/cs61a/docs/week-1/basics-of-python/" class="">Basics of Python</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Week 2</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/cs61a/docs/week-2/control/" class="">Control</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/cs61a/docs/week-2/higher-order-functions/" class="">Higher Order Functions</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/cs61a/docs/week-2/environment-diagrams/" class="">Environment Diagrams</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Week 3</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/cs61a/docs/week-3/decorators/" class="">Decorators</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/cs61a/docs/week-3/design/" class="">Design</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Week 4</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/cs61a/docs/week-4/recursion/" class="">Recursion</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/cs61a/docs/week-4/tree-recursion/" class="">Tree Recursion</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Week 5</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/cs61a/docs/week-5/containers/" class="">Containers</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/cs61a/docs/week-5/data-abstraction/" class="">Data Abstraction</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/cs61a/docs/week-5/sequences/" class="">Sequences</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Week 6</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/cs61a/docs/week-6/mutability/" class="">Mutability</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/cs61a/docs/week-6/trees/" class="">Trees</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Week 7</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/cs61a/docs/week-7/generators/" class="">Generators</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/cs61a/docs/week-7/iterators/" class="">Iterators</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/cs61a/docs/week-7/objects/" class="">Objects</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Week 8</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/cs61a/docs/week-8/inheritance/" class="">Inheritance</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/cs61a/docs/week-8/recursive-data/" class="active">Recursive Data</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/cs61a/docs/week-8/representation/" class="">String Interpolation and Representation</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Week 9</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/cs61a/docs/week-9/efficiency/" class="">Efficiency</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Week 10</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/cs61a/docs/week-10/break/" class="">No Content This Week</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Week 11</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/cs61a/docs/week-11/scheme-lists/" class="">Scheme Lists</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/cs61a/docs/week-11/scheme/" class="">Scheme Specification</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Week 12</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/cs61a/docs/week-12/calculator-language/" class="">Calculator Language</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/cs61a/docs/week-12/interpreting-scheme/" class="">Interpreting Scheme</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/cs61a/docs/week-12/macros-exceptions/" class="">Macros and Exceptions</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Week 13</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/cs61a/docs/week-13/sql-intro/" class="">SQL</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>










  
<ul>
  
  <li>
    <a href="https://neilthomass.github.io/author"  target="_blank" rel="noopener">
        About Me
      </a>
  </li>
  
</ul>






</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/cs61a/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <h3>Recursive Data</h3>

  <label for="toc-control">
    
    <img src="/cs61a/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#recursive-data">Recursive Data</a>
      <ul>
        <li><a href="#linked-lists">Linked Lists</a></li>
        <li><a href="#link-class">Link Class</a></li>
        <li><a href="#exercise-creating-a-range-in-a-linked-list-format">Exercise: Creating a Range in a Linked List format</a></li>
        <li><a href="#exercise-making-a-map-function-for-a-linked-list">Exercise: Making a map function for a Linked List</a>
          <ul>
            <li><a href="#making-a-copy">Making a copy</a></li>
            <li><a href="#mutating-the-list-given">Mutating the list given</a></li>
          </ul>
        </li>
        <li><a href="#exercise-filter">Exercise: Filter</a></li>
        <li><a href="#general-mutation-caveats">General Mutation caveats</a></li>
        <li><a href="#inserting-to-the-linked-list">Inserting to the Linked List</a></li>
        <li><a href="#tree-class">Tree Class</a></li>
        <li><a href="#tree-mutation">Tree Mutation</a>
          <ul>
            <li><a href="#exercise-double-every-label-of-a-tree">Exercise: Double every label of a tree</a></li>
            <li><a href="#exercise-prune-trees">Exercise: Prune Trees</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown book-article"><h1 id="recursive-data">
  Recursive Data
  <a class="anchor" href="#recursive-data">#</a>
</h1>
<h2 id="linked-lists">
  Linked Lists
  <a class="anchor" href="#linked-lists">#</a>
</h2>
<p>Python lists are implemented in a way that makes inserting and deleting from the front of a list very inefficient. This is because Python implemented a list such that the first element of the list is always at the same memory location and elements in a list are located right next to each other, so when something is inserted to the start, everything gets pushed forward by one space in memory to make space for an element.</p>
<p>If you ever need to constantly add to the front of a list, a Python list may not be a good idea. That&rsquo;s where a Linked List can come in handy.</p>
<p>Imagine building a list where each element can be anywhere in memory, and all that needs to happen is that one element knows where the next is:</p>
<p>I drew each node (or element) in a different location on the page just to illustrate that these blocks could be anywhere on the page and do not need to be directly next to each other like in a list. Each instance/element/node of our linked list just needs a value inside it, and an arrow pointing to the next linked list object. If we think of it this way, we can construct our own Linked List class.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Link</span>:
</span></span><span style="display:flex;"><span>    empty <span style="color:#f92672">=</span> () <span style="color:#75715e"># How we will refer to an empty linked list</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __init__(self, first, rest <span style="color:#f92672">=</span> empty):
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>first <span style="color:#f92672">=</span> first
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>rest <span style="color:#f92672">=</span> rest
</span></span></code></pre></div><p>Using this class, we can then define our first linked list!</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>my_link <span style="color:#f92672">=</span> Link(<span style="color:#ae81ff">1</span>, Link(<span style="color:#ae81ff">2</span>), Link(<span style="color:#ae81ff">3</span>)) <span style="color:#75715e"># Notice how similar it is to the tree data abstraction you used earlier</span>
</span></span></code></pre></div><p>In the example above, 1 is what gets stored in self.first, while Link(2, Link(3)) is what gets stored in self.rest, meaning that we are able to continue accessing our linked list.</p>
<p>However, one thing is pretty clear: it&rsquo;s impossible to directly access our Link(3) instance without first going through our whole list, following the list of pointers right until the end. This is one of the downsides of using a linked list in comparison to a python list - there are both benefits and drawbacks.</p>
<h2 id="link-class">
  Link Class
  <a class="anchor" href="#link-class">#</a>
</h2>
<p>A fancier version of the linked list that CS61A uses is the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Link</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;&#34;&#34;A linked list.&#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    empty <span style="color:#f92672">=</span> ()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __init__(self, first, rest<span style="color:#f92672">=</span>empty):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">assert</span> rest <span style="color:#f92672">is</span> Link<span style="color:#f92672">.</span>empty <span style="color:#f92672">or</span> isinstance(rest, Link) <span style="color:#75715e"># makes sure that the rest is either a linked list or emtpy</span>
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>first <span style="color:#f92672">=</span> first
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>rest <span style="color:#f92672">=</span> rest
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __repr__(self):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> self<span style="color:#f92672">.</span>rest:
</span></span><span style="display:flex;"><span>            rest_repr <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;, &#39;</span> <span style="color:#f92672">+</span> repr(self<span style="color:#f92672">.</span>rest)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>            rest_repr <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;Link(&#39;</span> <span style="color:#f92672">+</span> repr(self<span style="color:#f92672">.</span>first) <span style="color:#f92672">+</span> rest_repr <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;)&#39;</span> <span style="color:#75715e"># Returns the link class</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __str__(self):
</span></span><span style="display:flex;"><span>        string <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&lt;&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">while</span> self<span style="color:#f92672">.</span>rest <span style="color:#f92672">is</span> <span style="color:#f92672">not</span> Link<span style="color:#f92672">.</span>empty:
</span></span><span style="display:flex;"><span>            string <span style="color:#f92672">+=</span> str(self<span style="color:#f92672">.</span>first) <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39; &#39;</span> <span style="color:#75715e"># Recursion!!!</span>
</span></span><span style="display:flex;"><span>            self <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>rest
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> string <span style="color:#f92672">+</span> str(self<span style="color:#f92672">.</span>first) <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;&gt;&#39;</span>
</span></span></code></pre></div><p>Using this structure can make us certain that a Link instance is only able to point to either another instance of Link or Link.empty.</p>
<h2 id="exercise-creating-a-range-in-a-linked-list-format">
  Exercise: Creating a Range in a Linked List format
  <a class="anchor" href="#exercise-creating-a-range-in-a-linked-list-format">#</a>
</h2>
<p>Let&rsquo;s try to create something equivalent to [x for x in range(3, 6)] but in a linked list rather than a pythonic list.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">range_link</span>(start, end):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> start <span style="color:#f92672">&gt;=</span> end:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> Link<span style="color:#f92672">.</span>empty <span style="color:#75715e"># base case</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> Link(start, range_link(start <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>, end)) <span style="color:#75715e"># Recursive case to link the lists together</span>
</span></span></code></pre></div><h2 id="exercise-making-a-map-function-for-a-linked-list">
  Exercise: Making a map function for a Linked List
  <a class="anchor" href="#exercise-making-a-map-function-for-a-linked-list">#</a>
</h2>
<h3 id="making-a-copy">
  Making a copy
  <a class="anchor" href="#making-a-copy">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">map_ll</span>(fn, ll):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> ll <span style="color:#f92672">is</span> Link<span style="color:#f92672">.</span>empty:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> Link<span style="color:#f92672">.</span>empty
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> Link(fn(ll<span style="color:#f92672">.</span>first), map_ll(fn, ll<span style="color:#f92672">.</span>rest))
</span></span></code></pre></div><h3 id="mutating-the-list-given">
  Mutating the list given
  <a class="anchor" href="#mutating-the-list-given">#</a>
</h3>
<p>We can mutate the list because it&rsquo;s stored in a class, and as you know from making your classes, it is possible to mutate your instance variables (which is what appears here) which is why these solutions may feel weird initially.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">map_ll</span>(fn, ll):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> ll <span style="color:#f92672">is</span> <span style="color:#f92672">not</span> Link<span style="color:#f92672">.</span>empty:
</span></span><span style="display:flex;"><span>        ll<span style="color:#f92672">.</span>first <span style="color:#f92672">=</span> fn(ll<span style="color:#f92672">.</span>first) <span style="color:#75715e"># direct mutation of the linked list</span>
</span></span><span style="display:flex;"><span>        ll <span style="color:#f92672">=</span> ll<span style="color:#f92672">.</span>rest <span style="color:#75715e"># move forward in the linked list</span>
</span></span></code></pre></div><h2 id="exercise-filter">
  Exercise: Filter
  <a class="anchor" href="#exercise-filter">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">filter_ll</span>(fn, ll):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> ll <span style="color:#f92672">is</span> Link<span style="color:#f92672">.</span>empty:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> Link<span style="color:#f92672">.</span>empty
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> fn(ll<span style="color:#f92672">.</span>first):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> Link(ll<span style="color:#f92672">.</span>first, filter_ll(fn, ll<span style="color:#f92672">.</span>rest))
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> filter_ll(fn, ll<span style="color:#f92672">.</span>rest) <span style="color:#75715e"># moves onto the next case</span>
</span></span></code></pre></div><h2 id="general-mutation-caveats">
  General Mutation caveats
  <a class="anchor" href="#general-mutation-caveats">#</a>
</h2>
<p>You can sometimes have infinite linked lists if you set the rest instance variable to point to itself.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>my_ll <span style="color:#f92672">=</span> Link(<span style="color:#ae81ff">3</span>)
</span></span><span style="display:flex;"><span>my_ll<span style="color:#f92672">.</span>rest <span style="color:#f92672">=</span> my_ll
</span></span></code></pre></div><p>What this will do is point the linked list to itself, so when you try to do a recursive solution on it, it will never find a case where my_ll.rest is Link.empty.</p>
<h2 id="inserting-to-the-linked-list">
  Inserting to the Linked List
  <a class="anchor" href="#inserting-to-the-linked-list">#</a>
</h2>
<p>If you look at the image above, it outlines the process of inserting into the middle of a linked list in a visual manner.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">insert_ll</span>(ll, val, position):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> ll <span style="color:#f92672">is</span> Link<span style="color:#f92672">.</span>empty:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">assert</span> <span style="color:#66d9ef">False</span>, <span style="color:#e6db74">&#34;Position not found in Linked List&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> position <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>        new_link <span style="color:#f92672">=</span> Link(val)
</span></span><span style="display:flex;"><span>        new_link<span style="color:#f92672">.</span>rest <span style="color:#f92672">=</span> ll<span style="color:#f92672">.</span>rest
</span></span><span style="display:flex;"><span>        ll<span style="color:#f92672">.</span>rest <span style="color:#f92672">=</span> new_link
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        insert_ll(ll<span style="color:#f92672">.</span>rest, val, position <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>)
</span></span></code></pre></div><h2 id="tree-class">
  Tree Class
  <a class="anchor" href="#tree-class">#</a>
</h2>
<p>Remember the tree we made as a data abstraction? One issue that we had with the original implementation is that we couldn&rsquo;t mutate our tree label. However, because of the properties of classes, we are able to do that with a new implementation of our tree:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Tree</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __init__(self, label, branches<span style="color:#f92672">=</span>[]):
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>label <span style="color:#f92672">=</span> label
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>branches <span style="color:#f92672">=</span> list(branches)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">is_leaf</span>(self):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#f92672">not</span> self<span style="color:#f92672">.</span>branches
</span></span></code></pre></div><p>This will let us directly change self.label.</p>
<p>CS61A uses this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Tree</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __init__(self, label, branches<span style="color:#f92672">=</span>[]):
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>label <span style="color:#f92672">=</span> label
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> branch <span style="color:#f92672">in</span> branches:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">assert</span> isinstance(branch, Tree)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>branches <span style="color:#f92672">=</span> list(branches)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">is_leaf</span>(self):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#f92672">not</span> self<span style="color:#f92672">.</span>branches
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __repr__(self):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> self<span style="color:#f92672">.</span>branches:
</span></span><span style="display:flex;"><span>            branch_str <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;, &#39;</span> <span style="color:#f92672">+</span> repr(self<span style="color:#f92672">.</span>branches)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>            branch_str <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;Tree(</span><span style="color:#e6db74">{0}{1}</span><span style="color:#e6db74">)&#39;</span><span style="color:#f92672">.</span>format(self<span style="color:#f92672">.</span>label, branch_str)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __str__(self):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span><span style="color:#f92672">.</span>join(self<span style="color:#f92672">.</span>indented())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">indented</span>(self):
</span></span><span style="display:flex;"><span>        lines <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> b <span style="color:#f92672">in</span> self<span style="color:#f92672">.</span>branches:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span> line <span style="color:#f92672">in</span> b<span style="color:#f92672">.</span>indented():
</span></span><span style="display:flex;"><span>                lines<span style="color:#f92672">.</span>append(<span style="color:#e6db74">&#39;  &#39;</span> <span style="color:#f92672">+</span> line)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> [str(self<span style="color:#f92672">.</span>label)] <span style="color:#f92672">+</span> lines
</span></span></code></pre></div><h2 id="tree-mutation">
  Tree Mutation
  <a class="anchor" href="#tree-mutation">#</a>
</h2>
<h3 id="exercise-double-every-label-of-a-tree">
  Exercise: Double every label of a tree
  <a class="anchor" href="#exercise-double-every-label-of-a-tree">#</a>
</h3>
<p>Let&rsquo;s try to double every label of a tree by mutating every value:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">double</span>(t):
</span></span><span style="display:flex;"><span>    t<span style="color:#f92672">.</span>label <span style="color:#f92672">=</span> t<span style="color:#f92672">.</span>label <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> b <span style="color:#f92672">in</span> t<span style="color:#f92672">.</span>branches:
</span></span><span style="display:flex;"><span>        double(b)
</span></span></code></pre></div><h3 id="exercise-prune-trees">
  Exercise: Prune Trees
  <a class="anchor" href="#exercise-prune-trees">#</a>
</h3>
<p>Removing subtrees from a tree is called pruning. When you do this, always prune before doing the recursive call.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">prune</span>(t, n):
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;&#34;&#34;Prune all subtrees with label n&#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    t<span style="color:#f92672">.</span>branches <span style="color:#f92672">=</span> [b <span style="color:#66d9ef">for</span> b <span style="color:#f92672">in</span> t<span style="color:#f92672">.</span>branches <span style="color:#66d9ef">if</span> b<span style="color:#f92672">.</span>label <span style="color:#f92672">!=</span> n]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> b <span style="color:#f92672">in</span> t<span style="color:#f92672">.</span>branches:
</span></span><span style="display:flex;"><span>        prune(b, n)
</span></span></code></pre></div></article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#recursive-data">Recursive Data</a>
      <ul>
        <li><a href="#linked-lists">Linked Lists</a></li>
        <li><a href="#link-class">Link Class</a></li>
        <li><a href="#exercise-creating-a-range-in-a-linked-list-format">Exercise: Creating a Range in a Linked List format</a></li>
        <li><a href="#exercise-making-a-map-function-for-a-linked-list">Exercise: Making a map function for a Linked List</a>
          <ul>
            <li><a href="#making-a-copy">Making a copy</a></li>
            <li><a href="#mutating-the-list-given">Mutating the list given</a></li>
          </ul>
        </li>
        <li><a href="#exercise-filter">Exercise: Filter</a></li>
        <li><a href="#general-mutation-caveats">General Mutation caveats</a></li>
        <li><a href="#inserting-to-the-linked-list">Inserting to the Linked List</a></li>
        <li><a href="#tree-class">Tree Class</a></li>
        <li><a href="#tree-mutation">Tree Mutation</a>
          <ul>
            <li><a href="#exercise-double-every-label-of-a-tree">Exercise: Double every label of a tree</a></li>
            <li><a href="#exercise-prune-trees">Exercise: Prune Trees</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












